<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Jianjun Zhou's Notebook" name="description"/>
<link href="https://ZhouTimeMachine.github.io/note/math/geometry/quaternion/interpolation/" rel="canonical"/>
<link href="../quaternion/" rel="prev"/>
<link href="../../../../readings/" rel="next"/>
<link href="../../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.7" name="generator"/>
<title>Interpolation - Jianjun Zhou's Notebook</title>
<link href="../../../../assets/stylesheets/main.8608ea7d.min.css" rel="stylesheet"/>
<link href="../../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link href="../../../../css/svg_extra.css" rel="stylesheet"/>
<link href="../../../../css/heti.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/katex@0.16.19/dist/katex.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:500,500i,600,600i&amp;display=fallback" rel="stylesheet"/>
<link href="../../../../css/custom.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#_1">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Jianjun Zhou's Notebook" class="md-header__button md-logo" data-md-component="logo" href="../../../.." title="Jianjun Zhou's Notebook">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4zM3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm2-2v2h2V5zm0 14h2v-2H5zm0-6h2v-2H5z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Jianjun Zhou's Notebook
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Interpolation
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="夜间模式" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="夜间模式">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
</label>
<input aria-label="日间模式" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="teal" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="日间模式">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/ZhouTimeMachine/note/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    ZhouTimeMachine/note
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../..">
          
  
    
  
  Home

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../courses/">
          
  
    
  
  Courses

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../../">
          
  
    
  
  Math

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../../readings/">
          
  
    
  
  Readings

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Jianjun Zhou's Notebook" class="md-nav__button md-logo" data-md-component="logo" href="../../../.." title="Jianjun Zhou's Notebook">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4zM3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7zm2-2v2h2V5zm0 14h2v-2H5zm0-6h2v-2H5z"></path></svg>
</a>
    Jianjun Zhou's Notebook
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/ZhouTimeMachine/note/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    ZhouTimeMachine/note
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Home
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/">
<span class="md-ellipsis">
    Courses
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Courses
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/high-dim-prob/">
<span class="md-ellipsis">
    High-Dimensional Probability
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            High-Dimensional Probability
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/high-dim-prob/lec1/">
<span class="md-ellipsis">
    Lecture 1
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/toc/">
<span class="md-ellipsis">
    Theory of Computation
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            Theory of Computation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/toc/languages/">
<span class="md-ellipsis">
    Sets, Relations and Languages
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/toc/finite_automata/">
<span class="md-ellipsis">
    Finite Automata
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/toc/context_free/">
<span class="md-ellipsis">
    Context-Free Languages
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/toc/turing_machine/">
<span class="md-ellipsis">
    Turing Machine
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/toc/undecidability/">
<span class="md-ellipsis">
    Undecidability
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/toc/after_story/">
<span class="md-ellipsis">
    After Story
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/ads-final-review/">
<span class="md-ellipsis">
    Advanced Data Structure and Algorithm
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/probability/">
<span class="md-ellipsis">
    Probability Theory
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
            Probability Theory
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/probability/basics/">
<span class="md-ellipsis">
    Basics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/probability/rand_var_vec/">
<span class="md-ellipsis">
    Random Variable &amp; Vector
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/probability/feature_basics/">
<span class="md-ellipsis">
    Data Feature Basics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/probability/feature_pro/">
<span class="md-ellipsis">
    Data Feature Pro
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/probability/prob_lim/">
<span class="md-ellipsis">
    Limit Theorems
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/probability/normal_distr/">
<span class="md-ellipsis">
    Normal Distribution
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/numerical/">
<span class="md-ellipsis">
    Numerical Methods
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
            Numerical Methods
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/">
<span class="md-ellipsis">
    Numerical Analysis
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6_2" id="__nav_2_6_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_2">
<span class="md-nav__icon md-icon"></span>
            Numerical Analysis
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/1/">
<span class="md-ellipsis">
    Mathematical Preliminaries
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/2/">
<span class="md-ellipsis">
    Solve Equations (1 Variable)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/3/">
<span class="md-ellipsis">
    Interpolation &amp; Poly. Approx.
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/4/">
<span class="md-ellipsis">
    Numerical Diffs &amp; Integs
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/5/">
<span class="md-ellipsis">
    IVP for ODE
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/6/">
<span class="md-ellipsis">
    Solve Linear Systems (Directly)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/7/">
<span class="md-ellipsis">
    Solve Linear Systems (Iteratively)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/8/">
<span class="md-ellipsis">
    Approximation Theory
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/analysis/9/">
<span class="md-ellipsis">
    Approximating Eigenvalues
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_6_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/">
<span class="md-ellipsis">
    Numerical Algebra
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_6_3" id="__nav_2_6_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_6_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_3">
<span class="md-nav__icon md-icon"></span>
            Numerical Algebra
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/1/">
<span class="md-ellipsis">
    Direct Methods for Linear Systems
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/2/">
<span class="md-ellipsis">
    Sensitivity &amp; Round-off Error Analysis
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/3/">
<span class="md-ellipsis">
    Solve Least Square Problems
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/4/">
<span class="md-ellipsis">
    Classic Iterative Methods for Linear Systems
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/5/">
<span class="md-ellipsis">
    Conjugate Gradient Method
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/6/">
<span class="md-ellipsis">
    Solve Asymmetric Eigenvalue Problems
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/numerical/algebra/7/">
<span class="md-ellipsis">
    Solve Symmetric Eigenvalue Problems
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../courses/physics/">
<span class="md-ellipsis">
    Physics (H)
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_2_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
            Physics (H)
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/physics/2-electrostatics/">
<span class="md-ellipsis">
    Electrostatics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/physics/2-current/">
<span class="md-ellipsis">
    Current
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/physics/2-electromagnetics/">
<span class="md-ellipsis">
    Electromagnetics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/physics/2-optics/">
<span class="md-ellipsis">
    Optics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/physics/2-quantum/">
<span class="md-ellipsis">
    Quantum
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../courses/info-theory/">
<span class="md-ellipsis">
    Information Theory
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../">
<span class="md-ellipsis">
    Math
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Math
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../DEs/">
<span class="md-ellipsis">
    Differential Equations
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            Differential Equations
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../DEs/ODE/">
<span class="md-ellipsis">
    ODE
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_2_2" id="__nav_3_2_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_2">
<span class="md-nav__icon md-icon"></span>
            ODE
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/ODE/general1/">
<span class="md-ellipsis">
    Existence of Solution
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/ODE/system/">
<span class="md-ellipsis">
    ODE System
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../DEs/PDE/">
<span class="md-ellipsis">
    PDE
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_3">
<span class="md-nav__icon md-icon"></span>
            PDE
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/PDE/introduction/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/PDE/4linearPDEs/">
<span class="md-ellipsis">
    4 Linear PDEs
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../DEs/Intro2SDE/">
<span class="md-ellipsis">
    SDE
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_2_4" id="__nav_3_2_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_2_4">
<span class="md-nav__icon md-icon"></span>
            SDE
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/Intro2SDE/intro_prob/">
<span class="md-ellipsis">
    Introduction &amp; Probability
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/Intro2SDE/Brownian_noise/">
<span class="md-ellipsis">
    Brownian Motion &amp; "White Noise"
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/Intro2SDE/stochastic_integrals/">
<span class="md-ellipsis">
    Stochastic Integrals
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/Intro2SDE/SDE/">
<span class="md-ellipsis">
    SDE
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../DEs/Intro2SDE/applications/">
<span class="md-ellipsis">
    Applications
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../probability/">
<span class="md-ellipsis">
    Probability Theory
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../analysis/">
<span class="md-ellipsis">
    Analysis
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            Analysis
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../analysis/funcRvar/">
<span class="md-ellipsis">
    Funcs of Real Vars
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_4_2">
<span class="md-nav__icon md-icon"></span>
            Funcs of Real Vars
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analysis/funcRvar/sets/">
<span class="md-ellipsis">
    Basics of Set Theory
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analysis/funcRvar/LebesgueMeasure/">
<span class="md-ellipsis">
    Lebesgue Measure
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../analysis/continuities/">
<span class="md-ellipsis">
    Continuities
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Geometry
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            Geometry
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_5_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Quaternion
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3_5_2" id="__nav_3_5_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_3_5_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_5_2">
<span class="md-nav__icon md-icon"></span>
            Quaternion
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../basics/">
<span class="md-ellipsis">
    Basics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../quaternion/">
<span class="md-ellipsis">
    Quarternion
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Interpolation
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Interpolation
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#3d">
<span class="md-ellipsis">
      从四元数差分到 3D 向量旋转差分
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lerp-nlerp">
<span class="md-ellipsis">
      Lerp &amp; Nlerp
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#slerp">
<span class="md-ellipsis">
      Slerp
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#squad">
<span class="md-ellipsis">
      Squad
    </span>
</a>
<nav aria-label="Squad" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#bezier">
<span class="md-ellipsis">
      三次 Bézier 曲线
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#quad">
<span class="md-ellipsis">
      Quad 应用
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../readings/">
<span class="md-ellipsis">
    Readings
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Readings
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../readings/diffusion/">
<span class="md-ellipsis">
    Diffusion Models
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            Diffusion Models
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/diffusion/DDPM/">
<span class="md-ellipsis">
    DDPM
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/diffusion/DDIM/">
<span class="md-ellipsis">
    DDIM
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/diffusion/SGM/">
<span class="md-ellipsis">
    Score-based Generative Models
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/diffusion/v-prediction/">
<span class="md-ellipsis">
    v-prediction
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../readings/ICLR2024/">
<span class="md-ellipsis">
    ICLR2024
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
            ICLR2024
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/ICLR2024/Singularity_Diffusion/">
<span class="md-ellipsis">
    Singularity of Diffusion
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/ICLR2024/Particle_Filter_Diffusion/">
<span class="md-ellipsis">
    Particle Filter + Diffusion
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../readings/ICCV2023/">
<span class="md-ellipsis">
    ICCV2023
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
            ICCV2023
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/ICCV2023/DDPM_latent/">
<span class="md-ellipsis">
    Latent Space of DDPM
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/ICCV2023/DDFM_image_fusion/">
<span class="md-ellipsis">
    DDPM for Multi-Modality Image Fusion
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/ICCV2023/e2e_multiview_feature_matching/">
<span class="md-ellipsis">
    E2E Multi-View Feature Matching
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../../readings/NNbasics/">
<span class="md-ellipsis">
    Neural Network Basics
    
  </span>
</a>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            Neural Network Basics
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/NNbasics/lstm_gru/">
<span class="md-ellipsis">
    LSTM &amp; GRU
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/NNbasics/normalization/">
<span class="md-ellipsis">
    Normalization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/NNbasics/einsum/">
<span class="md-ellipsis">
    Einsum
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
<span class="md-ellipsis">
    Miscs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
            Miscs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/miscs/abbrs/">
<span class="md-ellipsis">
    Abbrs
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../../readings/miscs/metrics/">
<span class="md-ellipsis">
    Metrics
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#3d">
<span class="md-ellipsis">
      从四元数差分到 3D 向量旋转差分
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lerp-nlerp">
<span class="md-ellipsis">
      Lerp &amp; Nlerp
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#slerp">
<span class="md-ellipsis">
      Slerp
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#squad">
<span class="md-ellipsis">
      Squad
    </span>
</a>
<nav aria-label="Squad" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#bezier">
<span class="md-ellipsis">
      三次 Bézier 曲线
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#quad">
<span class="md-ellipsis">
      Quad 应用
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<p><link href="../../../../css/counter.css" rel="stylesheet"/></p>
<h1 id="_1">四元数插值</h1>
<div class="admonition info">
<p class="admonition-title">notes of <a href="https://github.com/Krasjet/quaternion">https://github.com/Krasjet/quaternion</a>, chapter 4 &amp; 5 &amp; 6</p>
</div>
<p>对<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_0=[\cos(\theta_0), \mathbf{u}_0\sin(\theta_0)]\)</span></span>、<span class="arithmatex">\(q_1=[\cos(\theta_1), \mathbf{u}_1\sin(\theta_1)]\)</span>，我们希望找出一些中间变换<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_t\)</span></span>，让<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>能够平滑地过渡到<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_1\)</span></span>，其中<span><span class="heti-spacing"> </span><span class="arithmatex">\(t=[0, 1]\)</span></span>。</p>
<p>对于特定的向量<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}\)</span><span class="heti-spacing"> </span></span>而言，<span class="arithmatex">\(q_0\)</span>、<span class="arithmatex">\(q_t\)</span>、<span><span class="arithmatex">\(q_1\)</span><span class="heti-spacing"> </span></span>会分别将<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}\)</span><span class="heti-spacing"> </span></span>旋转到<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span></span>、<span class="arithmatex">\(\mathbf{v}_t\)</span>、<span class="arithmatex">\(\mathbf{v}_1\)</span>。如下图所示，会有固定的<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{u}_t\)</span></span>，使得当<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span></span>、<span class="arithmatex">\(\mathbf{v}_t\)</span>、<span><span class="arithmatex">\(\mathbf{v}_1\)</span><span class="heti-spacing"> </span></span>的起点都在<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{u}_t\)</span><span class="heti-spacing"> </span></span>上时，他们三者的终点会位于以<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{u}_t\)</span><span class="heti-spacing"> </span></span>上某点为圆心的圆上——这个圆上<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_1\)</span><span class="heti-spacing"> </span></span>之间的夹角是<span><span class="heti-spacing"> </span><span class="arithmatex">\(\varphi\)</span></span>，而<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_t\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span><span class="heti-spacing"> </span></span>构成的夹角恰为<span><span class="heti-spacing"> </span><span class="arithmatex">\(t\varphi\)</span></span>。</p>
<blockquote>
<p>事实上这样对应的插值就是球面线性插值（Slerp<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，Lerp、<span>Nlerp<span class="heti-spacing"> </span></span>都是尝试对<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>进行近似。</p>
</blockquote>
<div style="text-align:center;">
<img alt="interpolation-find-vt" src="../../../imgs/quaternion/interpolation-find-vt.svg" style="width: 40%;"/>
</div>
<h2 id="3d">从四元数差分到<span class="heti-skip"><span class="heti-spacing"> </span>3D<span class="heti-spacing"> </span></span>向量旋转差分</h2>
<p>从<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}\)</span><span class="heti-spacing"> </span></span>到<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_1\)</span></span>，我们可以认为先经历了<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>对应的旋转成为<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span></span>，然后经历了一个<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\Delta q\)</span><span class="heti-spacing"> </span></span>的旋转从<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span><span class="heti-spacing"> </span></span>到<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_1\)</span></span>，这样就有：</p>
<div class="arithmatex">\[
q_1 = \Delta q q_0
\]</div>
<p><span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>是单位四元数，有<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_0^{-1} = q_0^*\)</span></span>，所以</p>
<div class="arithmatex">\[
\Delta q = q_1 q_0^* = [\cos\theta_1\cos\theta_0 + (\mathbf{u}_1\sin\theta_1)\cdot (\mathbf{u}_0\sin\theta_0), ...]
\]</div>
<p>注意到，将四元数<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_1, q_0\)</span><span class="heti-spacing"> </span></span>视为<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbb{R}^4\)</span><span class="heti-spacing"> </span></span>向量，<span><span class="arithmatex">\(\Delta q\)</span><span class="heti-spacing"> </span></span>的实部恰为<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_1\cdot q_0\)</span></span></p>
<ul>
<li>由于<span><span class="heti-spacing"> </span><span class="arithmatex">\(\|q_0\|=\|q_1\|=1\)</span></span>，于是设<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_1\)</span><span class="heti-spacing"> </span></span>在<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbb{R}^4\)</span><span class="heti-spacing"> </span></span>中的夹角为<span><span class="heti-spacing"> </span><span class="arithmatex">\(\theta\)</span></span>，有<span><span class="heti-spacing"> </span><span class="arithmatex">\(\Delta q = [\cos\theta, ...]\)</span></span></li>
<li>从<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span><span class="heti-spacing"> </span></span>到<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_1\)</span></span>，我们前面定义其绕<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{u}_t\)</span><span class="heti-spacing"> </span></span>的旋转角为<span><span class="heti-spacing"> </span><span class="arithmatex">\(\varphi\)</span></span>，则<span><span class="heti-spacing"> </span><span class="arithmatex">\(\Delta q = [\cos\frac{\varphi}{2}, ...]\)</span></span></li>
<li>因此有<span><span class="heti-spacing"> </span><span class="arithmatex">\(\cos\frac{\varphi}{2} = \cos\theta\)</span></span>，考虑到<span><span class="heti-spacing"> </span><span class="arithmatex">\(\frac{\varphi}{2}, \theta\in [0, \pi]\)</span></span>，有<span><span class="heti-spacing"> </span><span class="arithmatex">\(\varphi = 2\theta\)</span></span></li>
</ul>
<div style="display: flex; justify-content: space-between;">
<img alt="interpolation-quat-to-vec-rot-1" src="../../../imgs/quaternion/interpolation-quat-to-vec-rot-1.svg" style="width: 48%;"/>
<img alt="interpolation-quat-to-vec-rot-2" src="../../../imgs/quaternion/interpolation-quat-to-vec-rot-2.svg" style="width: 48%;"/>
</div>
<p>因此，对于<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_t\)</span></span>，我们会希望它旋转了<span><span class="heti-spacing"> </span><span class="arithmatex">\(t\varphi = 2t\theta\)</span></span>，对应的<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_t\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>的夹角为<span><span class="heti-spacing"> </span><span class="arithmatex">\(t\theta\)</span></span>。这样，我们可以初步得到<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>的一个实践上不好用的公式：将四元数差分<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\Delta q\)</span><span class="heti-spacing"> </span></span>改成<span><span class="heti-spacing"> </span><span class="arithmatex">\((\Delta q)^t\)</span></span></p>
<div class="arithmatex">\[
q_t = (\Delta q)^tq_0 = (q_1q_0^*)^tq_0
\]</div>
<h2 id="lerp-nlerp">Lerp &amp; Nlerp</h2>
<p><span>Slerp<span class="heti-spacing"> </span></span>的以上公式并不好算，我们考虑</p>
<div class="arithmatex">\[
q_t = \alpha q_0 + \beta q_1
\]</div>
<p>最简单的插值方式就是线性插值<span><span class="heti-spacing"> </span>(</span><strong>L</strong>inear In<strong>terp</strong>olation, Lterp)：</p>
<div class="arithmatex">\[
\mathbf{v}_t = (1-t)\mathbf{v}_0 + t\mathbf{v}_1
\]</div>
<p>如下图所示，<span class="arithmatex">\(\mathbf{v}_0\)</span>、<span class="arithmatex">\(\mathbf{v}_t\)</span>、<span><span class="arithmatex">\(\mathbf{v}_1\)</span><span class="heti-spacing"> </span></span>的终点会位于一条直线上，<span><span class="arithmatex">\(\mathbf{v}_t\)</span><span class="heti-spacing"> </span></span>构成<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span></span>、<span><span class="arithmatex">\(\mathbf{v}_1\)</span><span class="heti-spacing"> </span></span>的凸组合。</p>
<div style="text-align:center;">
<img alt="interpolation-lerp" src="../../../imgs/quaternion/interpolation-lerp.svg" style="width: 40%;"/>
</div>
<p>直接迁移，我们能得到<span class="heti-skip"><span class="heti-spacing"> </span>Lerp<span class="heti-spacing"> </span></span>插值公式：</p>
<div class="admonition abstract">
<p class="admonition-title">Lerp</p>
<div class="arithmatex">\[
q_t = t q_0 + (1-t) q_1
\]</div>
</div>
<p>然而<span class="heti-skip"><span class="heti-spacing"> </span>Lerp<span class="heti-spacing"> </span></span>存在的问题是它插出来的<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_t\)</span><span class="heti-spacing"> </span></span>一般不是一个单位四元数，因此进行正规化<span class="heti-skip"><span class="heti-spacing"> </span>(Normalization)<span class="heti-spacing"> </span></span>修正，得到<span><span class="heti-spacing"> </span>Nlerp (</span><strong>N</strong>ormalized <strong>L</strong>inear Int<strong>erp</strong><span>olation)<span class="heti-spacing"> </span></span>公式：</p>
<div class="admonition abstract">
<p class="admonition-title">Nlerp</p>
<div class="arithmatex">\[
q_t = \frac{t q_0 + (1-t) q_1}{\|t q_0 + (1-t) q_1\|}
\]</div>
</div>
<p><span>Nlerp<span class="heti-spacing"> </span></span>的问题是当需要插值的弧比较大时，<span><span class="arithmatex">\(\mathbf{v}_t\)</span><span class="heti-spacing"> </span></span>的角速度会有明显的变化。如下图所示，<span><span class="arithmatex">\(t=0\)</span><span class="heti-spacing"> </span></span>到<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(t=0.25\)</span><span class="heti-spacing"> </span></span>的弧就比<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(t=0.25\)</span><span class="heti-spacing"> </span></span>到<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(t=0.5\)</span><span class="heti-spacing"> </span></span>的弧短很多。<span><span class="arithmatex">\(0\)</span><span class="heti-spacing"> </span></span>到<span><span class="heti-spacing"> </span><span class="arithmatex">\(0.5\)</span></span>，角速度会逐渐增大；<span><span class="arithmatex">\(0.5\)</span><span class="heti-spacing"> </span></span>到<span><span class="heti-spacing"> </span><span class="arithmatex">\(1\)</span></span>，角速度会逐渐减小。</p>
<div style="text-align:center;">
<img alt="interpolation-Nlerp-problem" src="../../../imgs/quaternion/interpolation-Nlerp-problem.svg" style="width: 40%;"/>
</div>
<h2 id="slerp">Slerp</h2>
<p>球面线性插值<span><span class="heti-spacing"> </span>(</span><strong>S</strong>pherical <strong>L</strong>inear Int<strong>erp</strong><span>olation, Slerp)<span class="heti-spacing"> </span></span>能够保证插值的四元数是单位四元数，且角速度是恒定的。</p>
<div style="text-align:center;">
<img alt="interpolation-Slerp" src="../../../imgs/quaternion/interpolation-Slerp.svg" style="width: 40%;"/>
</div>
<p>我们想要把<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_t\)</span><span class="heti-spacing"> </span></span>表示为<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_1\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span><span class="heti-spacing"> </span></span>的线性组合，即</p>
<div class="arithmatex">\[
\mathbf{v}_t = \alpha \mathbf{v}_0 + \beta \mathbf{v}_1
\]</div>
<p>因此<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_t\)</span>, <span class="arithmatex">\(\alpha \mathbf{v}_0\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\beta \mathbf{v}_1\)</span><span class="heti-spacing"> </span></span>构成一个三角形</p>
<div style="text-align:center;">
<img alt="interpolation-Slerp-triangle" src="../../../imgs/quaternion/interpolation-Slerp-triangle.svg" style="width: 50%;"/>
</div>
<p>设<span><span class="heti-spacing"> </span><span class="arithmatex">\(\|\mathbf{v}_t\|= \|\mathbf{v}_1\| = \|\mathbf{v}_0\| = r\)</span></span>，根据正弦定理有</p>
<div class="arithmatex">\[
\frac{r}{\sin \theta} = \frac{\beta r}{\sin(t\theta)} = \frac{\alpha r}{\sin((1-t)\theta)}
\Rightarrow \alpha = \frac{\sin((1-t)\theta)}{\sin\theta}, \beta = \frac{\sin(t\theta)}{\sin\theta}
\]</div>
<p>将<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}\)</span><span class="heti-spacing"> </span></span>换成<span><span class="heti-spacing"> </span><span class="arithmatex">\(q\)</span></span>，可以得到<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>公式：</p>
<div class="admonition abstract">
<p class="admonition-title">Slerp</p>
<div class="arithmatex">\[
q_t = \frac{\sin((1-t)\theta)}{\sin\theta}q_0 + \frac{\sin(t\theta)}{\sin\theta}q_1,\quad \theta = \cos^{-1}(q_0\cdot q_1)
\]</div>
</div>
<p>在运算效率方面，这个公式会比之前利用幂运算的公式要高效很多，但是仍然涉及到三个三角函数以及一个反三角函数的运算，所以还是会比<span class="heti-skip"><span class="heti-spacing"> </span>Nlerp<span class="heti-spacing"> </span></span>要慢一点。如果要插值的角度比较小的话，<span>Nlerp<span class="heti-spacing"> </span></span>其实相对于<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>的误差并没有那么大，为了提高效率，我们经常会使用<span class="heti-skip"><span class="heti-spacing"> </span>Nlerp<span class="heti-spacing"> </span></span>来代替<span><span class="heti-spacing"> </span>Slerp</span>。</p>
<blockquote>
<p>也能用一些数值分析的方法来近似并优化四元数的<span><span class="heti-spacing"> </span>Slerp</span>，可以在一些图形引擎的源代码中找到一些例子</p>
</blockquote>
<p>具体实现中，我们还需要注意以下两个问题：</p>
<div class="admonition warning">
<p class="admonition-title">小心除零</p>
<p>除了效率问题之外，我们在实现<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>时要注意，如果单位四元数之间的夹角<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\theta\)</span><span class="heti-spacing"> </span></span>非常小，那么<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\sin\theta\)</span><span class="heti-spacing"> </span></span>可能会由于浮点数的误差被近似为<span><span class="heti-spacing"> </span>0.0</span>，从而导致除以<span class="heti-skip"><span class="heti-spacing"> </span>0<span class="heti-spacing"> </span></span>的错误。</p>
<p>因此我们在实施<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>之前，需要检查两个四元数的夹角是否过小（或者完全相同<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，如果过小我们就必须改用<span class="heti-skip"><span class="heti-spacing"> </span>Nlerp<span class="heti-spacing"> </span></span>对两个四元数进行插值，这时候<span class="heti-skip"><span class="heti-spacing"> </span>Nlerp<span class="heti-spacing"> </span></span>的误差非常小所以基本不会与真正的<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>有什么区别。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">双倍覆盖带来的问题</p>
<p>插值时应当寻找弧面最短路径，由于双倍覆盖的存在，如果<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_1\)</span><span class="heti-spacing"> </span></span>成钝角，那么<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_1\)</span><span class="heti-spacing"> </span></span>的 等效四元数<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(-q_1\)</span><span class="heti-spacing"> </span></span>成锐角，更符合弧面最短路径。</p>
<p></p><div style="text-align:center;">
<img alt="interpolation-Slerp-double-cover" src="../../../imgs/quaternion/interpolation-Slerp-double-cover.svg" style="width: 40%;"/>
</div>
<p>因此，首先检查若<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\cdot q_1 &lt; 0\)</span></span>，则将<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_1\)</span><span class="heti-spacing"> </span></span>取为<span><span class="heti-spacing"> </span><span class="arithmatex">\(-q_1\)</span></span>，再算夹角<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\theta\)</span><span class="heti-spacing"> </span></span>进行插值。</p>
<blockquote>
<p>当然，取<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>为<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(-q_0\)</span><span class="heti-spacing"> </span></span>也是可以的</p>
</blockquote>
</div>
<h2 id="squad">Squad</h2>
<p><span>Slerp<span class="heti-spacing"> </span></span>虽然实现了<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0\)</span><span class="heti-spacing"> </span></span>到<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_1\)</span><span class="heti-spacing"> </span></span>的固定角速度的插值，但是如果依次在<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_0, q_1, q_2, q_3\)</span><span class="heti-spacing"> </span></span>之间插值，在切换点会出现角速度的突变。我们希望以<strong>牺牲固定角速度</strong>为条件，让插值的曲线不仅是连续的（<span><span class="arithmatex">\(C^0\)</span><span class="heti-spacing"> </span></span>连续<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>，其一阶甚至更高阶导数也能是连续的（<span><span class="arithmatex">\(C^1\)</span><span class="heti-spacing"> </span></span>甚至<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(C^n\)</span><span class="heti-spacing"> </span></span>连续<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</p>
<p>球面四边形插值<span><span class="heti-spacing"> </span>(</span><strong>S</strong>pherical and <strong>quad</strong><span>rangle, Squad)<span class="heti-spacing"> </span></span>是一种解决方案，据说它由<span class="heti-skip"><span class="heti-spacing"> </span>Ken Shoemake<span class="heti-spacing"> </span></span>在<span class="heti-skip"><span class="heti-spacing"> </span>1987<span class="heti-spacing"> </span></span>年提出（这篇<span class="heti-skip"><span class="heti-spacing"> </span>paper<span class="heti-spacing"> </span></span>已经找不到了<heti-adjacent class="heti-adjacent-half">）</heti-adjacent>。</p>
<h3 id="bezier">三次<span class="heti-skip"><span class="heti-spacing"> </span>Bézier<span class="heti-spacing"> </span></span>曲线</h3>
<p>对于一系列向量<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0, \mathbf{v}_1, \mathbf{v}_2, \mathbf{v}_n\)</span></span>，我们分段对<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_i, \mathbf{v}_{i+1}\)</span><span class="heti-spacing"> </span></span>进行插值，将会涉及三次<span class="heti-skip"><span class="heti-spacing"> </span>Bézier<span class="heti-spacing"> </span></span>曲线<span><span class="heti-spacing"> </span>(Cube Bézier Curve)</span> 。这个算法需要生成中间的两个控制点<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{s}_{i-(i+1)-0}\)</span><span class="heti-spacing"> </span></span>和<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{s}_{i-(i+1)-1}\)</span></span>，这两个控制点的生成需要借助<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_{i-1}\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_{i+2}\)</span><span class="heti-spacing"> </span></span>的信息。</p>
<p>为了让曲线是<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(C^1\)</span><span class="heti-spacing"> </span></span>的，每个中间点的两个控制点将会分列其左右两侧，而端点的控制点可以直接取其本身。这样，我们将<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_i\)</span>, <span class="arithmatex">\(\mathbf{s}_{i-(i+1)-0}\)</span>, <span class="arithmatex">\(\mathbf{s}_{i-(i+1)-1}\)</span>, <span class="arithmatex">\(\mathbf{v}_{i+1}\)</span><span class="heti-spacing"> </span></span>重新编号为<span><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0, \mathbf{v}_1, \mathbf{v}_2, \mathbf{v}_3\)</span></span>，思考从<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_0\)</span><span class="heti-spacing"> </span></span>到<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(\mathbf{v}_3\)</span><span class="heti-spacing"> </span></span>的插值。</p>
<p>这里我们略去包括 <strong><span>de Casteljau<span class="heti-spacing"> </span></span>算法</strong>在内的推理过程，直接给出</p>
<div class="arithmatex">\[
\operatorname{Bézier}(\mathbf{v}_0, \mathbf{v}_1, \mathbf{v}_2, \mathbf{v}_3; t) = (1-t)^3\mathbf{v}_0 + 3(1-t)^2t\mathbf{v}_1 + 3(1-t)t^2\mathbf{v}_2 + t^3\mathbf{v}_3
\]</div>
<p>将<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>简写为<span><span class="heti-spacing"> </span>S</span>，则对应的<span class="heti-skip"><span class="heti-spacing"> </span>SBézier<span class="heti-spacing"> </span></span>插值为</p>
<div class="arithmatex">\[
\operatorname{SBézier}(q_0, q_1, q_2, q_3; t) = S(S(S(q_0, q_1; t), S(q_1, q_2; t); t), S(S(q_1, q_2; t), S(q_2, q_3; t); t); t)
\]</div>
<p>一次<span class="heti-skip"><span class="heti-spacing"> </span>Slerp<span class="heti-spacing"> </span></span>需要使用<span class="heti-skip"><span class="heti-spacing"> </span>4<span class="heti-spacing"> </span></span>次三角函数，这样两个点之间插值就需要<span class="heti-skip"><span class="heti-spacing"> </span>7<span class="heti-spacing"> </span></span>个<span><span class="heti-spacing"> </span>Slerp</span>，性能影响过大。<span>Squad<span class="heti-spacing"> </span></span>是对其的一种近似，这里依然省略其推导，有</p>
<div class="admonition abstract">
<p class="admonition-title">Squad</p>
<div class="arithmatex">\[
\operatorname{Squad}(q_0, q_1, q_2, q_3; t) = \operatorname{Slerp}(\operatorname{Slerp}(q_0, q_3; t), \operatorname{Slerp}(q_1, q_2; t); 2t(1-t))
\]</div>
</div>
<p>可以写作指数形式，方便一些分析</p>
<div class="arithmatex">\[
\operatorname{Squad}(q_0, q_1, q_2, q_3; t) = \left\{\operatorname{Slerp}(q_1, q_2; t)[\operatorname{Slerp}(q_0, q_3; t)]^*\right\}^{2t(1-t)}\operatorname{Slerp}(q_1, q_2; t)
\]</div>
<h3 id="quad"><span>Quad<span class="heti-spacing"> </span></span>应用</h3>
<p>一个关键问题是如何生成控制点。我们希望<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_{i-1}\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_i\)</span><span class="heti-spacing"> </span></span>插值在<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(t=1\)</span><span class="heti-spacing"> </span></span>处的导数，和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_i\)</span><span class="heti-spacing"> </span></span>和<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_{i+1}\)</span><span class="heti-spacing"> </span></span>插值在<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(t=0\)</span><span class="heti-spacing"> </span></span>处的导数相等。省略一系列推导，我们有</p>
<div class="arithmatex">\[
s_i = q_i\exp\left(-\frac{\log(q_i^*q_{i-1}) + \log(q_i^*q_{i+1})}{4}\right)
\]</div>
<p>注意，和三次<span class="heti-skip"><span class="heti-spacing"> </span>Bézier<span class="heti-spacing"> </span></span>曲线不同，这里<span class="heti-skip"><span class="heti-spacing"> </span><span class="arithmatex">\(q_i\)</span><span class="heti-spacing"> </span></span>对应的控制点不管在左侧还是右侧都是<span><span class="heti-spacing"> </span><span class="arithmatex">\(s_i\)</span></span>。</p>
<p>与两个四元数之间的插值一样，<span>Squad<span class="heti-spacing"> </span></span>同样会受到双重覆盖的影响。我们在计算中间控制点和插值之前，需要先选中一个四元数，比如说<span><span class="heti-spacing"> </span><span class="arithmatex">\(q_i\)</span></span>，检测它与其它三个四元数之间的夹角，如果是钝角就翻转，将插值的路线减到最小。</p>
<h2 id="__comments">Comments</h2>
<!-- Insert generated snippet here -->
<script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOKjiG3c4Cf36n" data-emit-metadata="0" data-input-position="top" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="ZhouTimeMachine/note" data-repo-id="R_kgDOKjiG3Q" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js">
</script>
<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2023 <a href="https://github.com/ZhouTimeMachine" rel="noopener" target="_blank">ZhouTimeMachine</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.copy", "content.code.annotate", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../../assets/javascripts/bundle.c8b220af.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.19/dist/katex.min.js"></script>
<script src="../../../../js/katex.js"></script>
<script src="../../../../js/heti.js"></script>
</body>
</html>